<!doctype html>
<html lang="ru" data-theme="cerberus">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/svelte_novella/novella_icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- PWA мета-теги для iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Визуальные новеллы">
    <link rel="apple-touch-icon" href="/svelte_novella/icon-192.png">
    <link rel="apple-touch-startup-image" href="/svelte_novella/icon-512.png">
    
    <!-- PWA манифест -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Заголовки для PWA -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="format-detection" content="telephone=no">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
      Telegram.WebApp.expand();
    </script>
    
    <title>Визуальные новеллы</title>
    <script type="module" crossorigin src="./assets/index-BqN-dvqu.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-C-XDlt5c.css">
  </head>
  <body>
    <div id="app"></div>
    
    <!-- Регистрация Service Worker -->
    <script>
      const BASE_PATH = '/svelte_novella';
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register(BASE_PATH + '/sw.js')
            .then((registration) => {
              console.log('[SW] Зарегистрирован:', registration.scope);
            })
            .catch((error) => {
              console.log('[SW] Ошибка регистрации:', error);
            });
        });
      }
    </script>
  </body>
</html>
